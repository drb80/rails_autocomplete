<p style="color: green"><%= notice %></p>

<h1>Tasks</h1>

<%= form_with(url: tasks_path, method: :get,
      data: { turbo_frame: "results", turbo_action: "advance"}) do |form| %>
  Search
  <%= form.search_field(:query, value: params[:query],
    oninput: "this.form.requestSubmit()") %>
<% end %>

<%= turbo_frame_tag "results" do %>
  <div id="tasks">
    <table border>
      <% @tasks.each do |task| %>
        <tr>
          <td><%= render task %></td>
          <td><%= link_to "Show this task", task %>
        </td>
      <% end %>
    </table>
  </div>
<% end %>

<%= link_to "New task", new_task_path %>
